this.window[APP_NAME].controller("NotificationsController",["$scope","$http","$pusher",function(t,e,n){var i,r,a,o,u,c;return r=["exam","appointment","surgery"],i=["Exame","Consulta","Cirurgia"],a=function(){return u(),c()},c=function(){var e,i,r;return i=new Pusher(PUSHER_KEY),r=n(i),e=r.subscribe("notification_channel"),e.bind("new_notification",function(e){return t.notifications.unshift(e)})},u=function(){return e({url:"/api/v1/notifications.json?user_id=:user_id".replace(":user_id",USER_ID),method:"get"}).success(function(e){return t.notifications=e.notifications})},t.getNotificationCategorySlug=function(t){return r[t]},t.getNotificationCategoryName=function(t){return i[t]},t.createNotification=function(n){var i,r;return n.preventDefault(),i=0===angular.element(n.target).find('input[name="notification[category]"]:checked').length?"":angular.element(n.target).find('input[name="notification[category]"]:checked')[0].value,r={authenticity_token:angular.element(n.target).find("input[name=authenticity_token]")[0].value,notification:{category:i,note:angular.element(n.target).find('textarea[name="notification[note]"]')[0].value,user_id:angular.element(n.target).find('input[name="notification[user_id]"]')[0].value}},e({url:"/api/v1/notifications.json?user_id=:user_id".replace(":user_id",USER_ID),method:"post",data:r}).success(function(e){return e.success?(t.errors={},o(n),$("html, body").animate({scrollTop:0})):t.errors=e.errors})},o=function(t){return angular.element(t.target).find('input[name="notification[category]"]:checked')[0].checked=!1,angular.element(t.target).find('textarea[name="notification[note]"]')[0].value=""},t.deleteNotification=function(n,i){return n.preventDefault(),e({url:"/api/v1/notifications/:id.json?user_id=:user_id".replace(":id",i.id).replace(":user_id",USER_ID),method:"delete"}).success(function(e){if(e.success)return t.notifications.splice(t.notifications.indexOf(i),1)})},a()}]);