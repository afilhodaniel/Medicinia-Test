this.window[APP_NAME].controller("NotificationsController",["$scope","$http","$pusher",function(t,e,i){var n,o,r,a,c;return o=["exam","appointment","surgery"],n=["Exame","Consulta","Cirurgia"],r=function(){return t.getAllNotifications(),c()},c=function(){var e,n,o;return n=new Pusher(PUSHER_KEY),o=i(n),e=o.subscribe("notification_channel"),e.bind("new_notification",function(e){return t.notifications.unshift(e)})},t.getAllNotifications=function(){return e({url:"/api/v1/notifications.json?user_id=:user_id".replace(":user_id",USER_ID),method:"get"}).success(function(e){return t.notifications=e.notifications})},t.getNotificationsByCategory=function(i){return e({url:"/api/v1/notifications.json?user_id=:user_id&category=:category".replace(":user_id",USER_ID).replace(":category",i),method:"get"}).success(function(e){return t.notifications=e.notifications})},t.getNotificationsBySearch=function(i){var n;return i.preventDefault(),n=angular.element(i.target).find('input[name="notification[note]"]')[0].value,e({url:"/api/v1/notifications/search.json?user_id=:user_id&note=:note".replace(":user_id",USER_ID).replace(":note",n),method:"get"}).success(function(e){return e.notifications.length>0?(angular.element(".filter-radio")[0].checked=!0,t.notifications=e.notifications):t.notifications=[]})},t.getNotificationCategorySlug=function(t){return o[t]},t.getNotificationCategoryName=function(t){return n[t]},t.createNotification=function(i){var n,o;return i.preventDefault(),n=0===angular.element(i.target).find('input[name="notification[category]"]:checked').length?"":angular.element(i.target).find('input[name="notification[category]"]:checked')[0].value,o={authenticity_token:angular.element(i.target).find("input[name=authenticity_token]")[0].value,notification:{category:n,note:angular.element(i.target).find('textarea[name="notification[note]"]')[0].value,user_id:angular.element(i.target).find('input[name="notification[user_id]"]')[0].value}},e({url:"/api/v1/notifications.json?user_id=:user_id".replace(":user_id",USER_ID),method:"post",data:o}).success(function(e){return e.success?(t.errors={},a(i),$("html, body").animate({scrollTop:0})):t.errors=e.errors})},a=function(t){return angular.element(t.target).find('input[name="notification[category]"]:checked')[0].checked=!1,angular.element(t.target).find('textarea[name="notification[note]"]')[0].value=""},t.deleteNotification=function(i,n){return i.preventDefault(),e({url:"/api/v1/notifications/:id.json?user_id=:user_id".replace(":id",n.id).replace(":user_id",USER_ID),method:"delete"}).success(function(e){if(e.success)return t.notifications.splice(t.notifications.indexOf(n),1)})},t.confirmNotification=function(i,n){var o;return i.preventDefault(),o={notification:{confirmed:!n.confirmed}},e({url:"/api/v1/notifications/:id.json?user_id=:user_id".replace(":id",n.id).replace(":user_id",USER_ID),method:"put",data:o}).success(function(e){if(e.success)return t.notifications[t.notifications.indexOf(n)]=e.notification})},r()}]);